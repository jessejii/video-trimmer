# GPU优化视频剪辑工具

一个使用GPU加速的批量视频剪辑工具，可以快速去除视频开头和结尾的指定时间段。

## 功能特点

- 🚀 GPU硬件加速编码（AMD显卡优化）
- 💻 CPU备用方案（自动切换）
- 📊 实时进度显示
- 🎯 支持手动设置剪辑时间
- 📁 批量处理多个视频文件
- 🔧 支持多种视频格式

## 支持的视频格式

- MP4, AVI, MOV, MKV, FLV, WMV, M4V

## 系统要求

- Python 3.6+
- FFmpeg 和 FFprobe
- Windows 系统
- AMD显卡（推荐，用于GPU加速）

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

1. 将要处理的视频文件放入 `video` 文件夹
2. 运行脚本：
   ```bash
   python gpu_optimized_trim.py
   ```
3. 按提示输入要去掉的开头和结尾时间（秒）
4. 确认设置后开始处理
5. 处理完成的视频将保存在 `output` 文件夹中

## 使用示例

```
🎬 GPU优化批量视频剪辑工具
==================================================
✅ ffmpeg和ffprobe可用

⚙️ 请设置剪辑参数：
请输入要去掉的开头时间（秒）[默认: 29]: 30
请输入要去掉的结尾时间（秒）[默认: 25]: 20

📋 设置确认：
   开头去掉：30.0 秒
   结尾去掉：20.0 秒

是否开始处理？(y/N): y
```

## 文件结构

```
├── video/                  # 输入视频文件夹
├── output/                 # 输出视频文件夹
├── gpu_optimized_trim.py   # 主程序
├── requirements.txt        # 依赖包列表
└── README.md              # 说明文件
```

## 注意事项

- 确保视频时长大于要去掉的开头和结尾时间之和
- 处理大文件时请确保有足够的磁盘空间
- 如果GPU编码失败，程序会自动切换到CPU编码
- 输出文件名会自动添加 `trimmed_` 前缀

## 故障排除

### 编码错误
如果遇到编码相关错误，通常是由于文件名包含特殊字符导致，程序已经优化了编码处理。

### GPU编码失败
如果GPU编码失败，程序会自动使用CPU编码作为备用方案，处理速度会稍慢但仍能正常工作。

### FFmpeg未找到
请确保已正确安装FFmpeg并添加到系统PATH环境变量中。

## 技术细节

- 使用 `h264_amf` 进行AMD GPU硬件编码(旧显卡需要替换ffmpeg,比如替换conda下bin的ffmpeg.exe: https://github.com/BtbN/FFmpeg-Builds/releases)
- 使用 `libx264` 作为CPU编码备用方案
- 支持实时进度显示和处理速度监控
- 自动处理中文文件名编码问题